(this["webpackJsonptweetbook-client"]=this["webpackJsonptweetbook-client"]||[]).push([[0],{114:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(11),a=n.n(o),c=(n(114),n(52)),s=n(15),l="SET_CURRENT_USER",u={isAuthenticated:!1,user:{}};var d=Object(c.b)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return t.type===l?Object(s.a)(Object(s.a)({},e),{},{isAuthenticated:!!Object.keys(t.payload.user).length,user:t.payload.user}):e}}),j=d,h=n(89);var b=n(20),p=n(23),f=n(13),m=(n(28),n(182)),O=n(2),v=Object(b.b)((function(e){return{auth:e.currentUser.isAuthenticated}}),null)((function(e){var t=Object(f.useHistory)();return e.auth?(t.push("/home"),Object(O.jsx)("p",{children:"loading..."})):Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsxs)("header",{className:"header",children:[Object(O.jsx)("h2",{className:"logo",children:"TweetBook"}),Object(O.jsxs)("div",{className:"nav",children:[Object(O.jsx)(m.a,{component:"div",color:"inherit",className:"nav-button","data-testId":"signup",onClick:function(){return t.push("/signup")},children:"Signup"}),Object(O.jsx)(m.a,{component:"div",color:"inherit",className:"nav-button","data-testId":"login",onClick:function(){return t.push("/signin")},children:"Login"})]})]}),Object(O.jsx)("div",{className:"background-img",children:Object(O.jsxs)("div",{className:"welcome",children:[Object(O.jsx)("h1",{className:"welcome-text",children:"Welcome to TweetBook!"}),Object(O.jsxs)("p",{className:"welcome-desc",children:[Object(O.jsx)("b",{children:"Login/Signup"})," to explore more..."]})]})})]})})),x=n(33),g=n(35),w=n(26),y=n(49),k=n(51),C=n(186),S=n(187),N=n(191),U=n(188),I=n(189),T=n(190),_=n(192);var R=Object(b.b)((function(e){var t,n;return{user:null===(t=e.currentUser)||void 0===t||null===(n=t.user._id)||void 0===n?void 0:n.$oid}}),null)((function(e){var t=Object(f.useHistory)();return Object(O.jsxs)("div",{className:"navbar",children:[Object(O.jsxs)(C.a,{value:e.value,className:"bottom-nav",children:[Object(O.jsx)(S.a,{component:p.b,to:"/home",label:"Home",value:"Home",icon:Object(O.jsx)(U.a,{}),default:!0}),Object(O.jsx)(S.a,{component:p.b,to:"/search",label:"Search",value:"Search",icon:Object(O.jsx)(I.a,{})}),Object(O.jsx)(S.a,{component:p.b,to:"/user/".concat(e.user),label:"User",value:"User",icon:Object(O.jsx)(T.a,{})})]}),Object(O.jsx)(N.a,{component:"button",className:"add-icon",color:"primary",onClick:function(){return t.push("/newTweet")},children:Object(O.jsx)(_.a,{})})]})})),W=n(12),$=n(210),P=n(146),D=n(209),E=n(66),F=n.n(E);function L(e,t,n){return new Promise((function(r,i){F.a[e](t,n).then((function(e){return r(e.data)})).catch((function(e){var t,n;return i(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)}))}))}var A=n(95),B=n.n(A),z=n(196),H=n(194),q=n(207),J=n(195),M=n(3),Y=n(5),G=n(193),K=n(94),Q=n.n(K),V=n(99),X=["children","classes","onClose"],Z=Object(Y.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,r=e.onClose,i=Object(M.a)(e,X);return Object(O.jsxs)(G.a,Object(s.a)(Object(s.a)({disableTypography:!0,className:n.root},i),{},{children:[Object(O.jsx)(V.a,{variant:"h6",children:t}),r?Object(O.jsx)(H.a,{"aria-label":"close",className:n.closeButton,onClick:r,children:Object(O.jsx)(Q.a,{})}):null]}))})),ee=Object(Y.a)((function(e){return{root:{padding:e.spacing(2)}}}))(J.a),te={display:"flex",flexDirection:"row",borderRadius:"20px",margin:"5px",padding:"5px",minWidth:"80px"};function ne(e){var t,n,i=e.user,o=Object(r.useState)(!1),a=Object(W.a)(o,2),c=a[0],s=a[1],l=Object(r.useState)(null),u=Object(W.a)(l,2),d=u[0],j=u[1],h=Object(r.useState)(null),b=Object(W.a)(h,2),p=b[0],f=b[1],m=function(e,t){s(!0),j(e),f(t)},v=function(){f(""),j(null),s(!1)},x=Object(O.jsx)(z.a,{});return null!==d&&(x=d.map((function(e,t){return Object(O.jsxs)("div",{style:te,children:[Object(O.jsx)(D.a,{alt:"Remy Sharp",src:e.profileImgUrl}),Object(O.jsx)("h4",{style:{margin:"5px"},children:e.username})]},t)}))),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"profile-row",children:[Object(O.jsx)($.a,{component:"div",style:{padding:"10px",margin:"10px"},label:"followers ".concat(null===i||void 0===i||null===(t=i.followers)||void 0===t?void 0:t.length),onClick:function(){return m(null===i||void 0===i?void 0:i.followers,"followers")}}),Object(O.jsx)($.a,{componenet:"div",style:{padding:"10px",margin:"10px"},label:"following ".concat(null===i||void 0===i||null===(n=i.following)||void 0===n?void 0:n.length),onClick:function(){return m(null===i||void 0===i?void 0:i.following,"Following")}})]}),Object(O.jsxs)(q.a,{onClose:v,"aria-labelledby":"customized-dialog-title",open:c,children:[Object(O.jsx)(Z,{id:"customized-dialog-title",onClose:v,children:p}),Object(O.jsx)(ee,{children:x})]})]})}var re={display:"flex",flexDirection:"row",borderRadius:"20px",margin:"5px",padding:"5px",minWidth:"80px"};function ie(e){var t,n,i,o,a,c=e.userInfo,l=e.post,u=e.updateTweet,d=Object(r.useState)(oe(l,c)?"secondary":"action"),j=Object(W.a)(d,2),h=j[0],b=j[1],p=Object(r.useState)(!1),m=Object(W.a)(p,2),v=m[0],x=m[1],g=Object(f.useHistory)(),w=Object(s.a)({},l.user),y=Object(O.jsx)(z.a,{});null!==l&&void 0!==l&&null!==(t=l.likes)&&void 0!==t&&t.length?y=null===l||void 0===l||null===(a=l.likes)||void 0===a?void 0:a.map((function(e,t){return Object(O.jsxs)("div",{style:re,children:[Object(O.jsx)(D.a,{alt:"Remy Sharp",src:e.profileImgUrl}),Object(O.jsx)("h4",{style:{margin:"5px"},children:e.username})]},e._id.$oid)})):y=Object(O.jsx)("span",{children:"No Likes yet!"});return Object(O.jsxs)("div",{className:"message-card",children:[Object(O.jsx)("p",{className:"post-text",children:l.text}),Object(O.jsxs)(P.a,{component:"div",className:"msgcard-info",children:[Object(O.jsxs)("div",{className:"msgcard-like",children:[Object(O.jsx)(H.a,{"aria-label":"delete",size:"small",onClick:function(){"secondary"===h?L("delete","/api/user/tweet/".concat(l._id.$oid,"/like")).then((function(e){b("action"),u(e)})).catch((function(e){return console.log(e)})):L("post","/api/user/tweet/".concat(l._id.$oid,"/like")).then((function(e){b("secondary"),u(e)})).catch((function(e){return console.log(e)}))},children:Object(O.jsx)(B.a,{style:{padding:"0 5px"},fontSize:"small",color:h})}),Object(O.jsx)(H.a,{"aria-label":"delete",size:"small",onClick:function(){return x(!0)},children:Object(O.jsx)("p",{style:{margin:"0 10px"},children:(null===l||void 0===l||null===(n=l.likes)||void 0===n?void 0:n.length)||0})}),Object(O.jsx)($.a,{style:{margin:"2px"},label:new Date(Number(null===(i=l.updatedAt)||void 0===i||null===(o=i.$date)||void 0===o?void 0:o.$numberLong)).toDateString()})]}),Object(O.jsx)($.a,{avatar:Object(O.jsx)(D.a,{alt:w.username,src:w.profileImgUrl}),onClick:function(){var e;return g.push("/user/".concat(null===w||void 0===w||null===(e=w._id)||void 0===e?void 0:e.$oid))},label:w.username}),Object(O.jsxs)(q.a,{onClose:function(){return x(!1)},"aria-labelledby":"customized-dialog-title",open:v,children:[Object(O.jsx)(Z,{id:"customized-dialog-title",onClose:function(){return x(!1)},children:"Likes"}),Object(O.jsx)(J.a,{children:y})]})]})]})}var oe=function(e,t){var n;return!(null===e||void 0===e||null===(n=e.likes)||void 0===n||!n.some((function(e){var n;return e._id.$oid===(null===(n=t._id)||void 0===n?void 0:n.$oid)})))},ae=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={feed:[]},r}return Object(w.a)(n,[{key:"componentDidMount",value:function(){var e=this;L("get","/api/tweets").then((function(t){e.setState({feed:t}),console.log("Fetched Data: ",t)})).catch((function(e){console.log(e)}))}},{key:"updateTweet",value:function(e){this.setState({feed:this.state.feed.map((function(t){return t._id.$oid===e._id.$oid?e:t}))})}},{key:"render",value:function(){var e=this;console.log(this.props);var t=Object(O.jsx)("div",{className:"loading",children:Object(O.jsx)(z.a,{})});this.state.feed.length>0&&(t=Object(x.a)(this.state.feed).reverse().map((function(t,n){return Object(O.jsx)(ie,{userInfo:e.props.user,post:t,updateTweet:function(t){return e.updateTweet(t)}},n)})));return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)("div",{className:"home-page",children:t}),Object(O.jsx)(R,{value:"Home"})]})}}]),n}(r.Component),ce=Object(b.b)((function(e){return{user:e.currentUser.user}}),null)(ae),se=n(204),le=n(96),ue=n.n(le),de=n(197),je=n(201);function he(e){var t=Object(r.useState)(!1),n=Object(W.a)(t,2),i=n[0],o=n[1],a=Object(r.useState)((null===e||void 0===e?void 0:e.bio)||null),c=Object(W.a)(a,2),s=c[0],l=c[1],u=Object(r.useState)((null===e||void 0===e?void 0:e.profilePic)||null),d=Object(W.a)(u,2),j=d[0],h=d[1],b=function(){o(!1)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{component:"button",onClick:function(){o(!0)},style:{padding:"15px",margin:"auto 0",borderRadius:"50%"},variant:"contained",children:Object(O.jsx)(ue.a,{})}),Object(O.jsxs)(q.a,{maxWidth:"md",open:i,onClose:b,"aria-labelledby":"form-dialog-title",children:[Object(O.jsx)(G.a,{id:"form-dialog-title",children:"Edit Profile:"}),Object(O.jsxs)(J.a,{children:[Object(O.jsx)(de.a,{children:"Edit the Bio:"}),Object(O.jsx)(se.a,{autoFocus:!0,margin:"dense",id:"name",value:s,label:"Describe yourself",type:"text",onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(O.jsx)(de.a,{children:"Profile Picture:"}),Object(O.jsx)(se.a,{autoFocus:!0,margin:"dense",id:"name",value:j,label:"Paste a link of nice picture",type:"text",onChange:function(e){return h(e.target.value)},fullWidth:!0})]}),Object(O.jsxs)(je.a,{children:[Object(O.jsx)(m.a,{onClick:b,color:"primary",children:"Cancel"}),Object(O.jsx)(m.a,{onClick:function(){e.editProfile({bio:s,profilePic:j}),o(!1)},color:"primary",children:"Update"})]})]})]})}var be=Object(f.withRouter)(Object(b.b)((function(e){return{user:e.currentUser.user}}),null)((function(e){var t,n=Object(r.useState)({user:null,navbar:null,follow:null}),o=Object(W.a)(n,2),a=o[0],c=o[1],l=e.match.params.id;Object(r.useEffect)((function(){!function(){var t=e.user;L("get","/api/user/profile/".concat(l)).then((function(e){l===t._id.$oid?c({user:null===e||void 0===e?void 0:e[0],load:!0,navbar:"User"}):null!==e&&void 0!==e&&e[0].followers.some((function(e){return e._id.$oid===t._id.$oid}))?c({user:null===e||void 0===e?void 0:e[0],follow:"following"}):c({user:null===e||void 0===e?void 0:e[0],follow:"follow"})})).catch((function(e){return console.log(e)}))}()}),[l]);var u,d,j,h,b,p,f=function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{user:Object(s.a)(Object(s.a)({},t.user),{},{messages:t.user.messages.map((function(t){return t._id.$oid===e._id.$oid?e:t}))})})}))},v=null===(t=a.user)||void 0===t?void 0:t.messages.map((function(t,n){var r,i,o;return Object(O.jsx)(ie,{userInfo:e.user,post:Object(s.a)(Object(s.a)({},t),{},{user:{_id:null===(r=a.user)||void 0===r?void 0:r._id,username:null===(i=a.user)||void 0===i?void 0:i.username,profileImgUrl:null===(o=a.user)||void 0===o?void 0:o.profileImgUrl}}),updateTweet:f},t._id.$oid)}));return a.user?Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsxs)("div",{className:"home-page",children:[Object(O.jsx)("div",{className:"message-card",children:Object(O.jsxs)("div",{className:"profile-row",children:[Object(O.jsx)("img",{className:"profile-img",src:null!==(u=a.user)&&void 0!==u&&u.profileImgUrl?null===(d=a.user)||void 0===d?void 0:d.profileImgUrl:"https://www.knack.com/images/about/default-profile.png",alt:"profile-img"}),Object(O.jsxs)("div",{className:"profile-info",children:[Object(O.jsx)("h1",{className:"username",children:null===(j=a.user)||void 0===j?void 0:j.username}),Object(O.jsx)("p",{style:{color:"white",maxWidth:"500px"},children:null===(h=a.user)||void 0===h?void 0:h.bio}),Object(O.jsx)(ne,{user:{followers:null===(b=a.user)||void 0===b?void 0:b.followers,following:null===(p=a.user)||void 0===p?void 0:p.following}})]}),a.navbar?Object(O.jsx)(he,{bio:a.user.bio,profilePic:a.user.profileImgUrl,editProfile:function(e){var t;L("put","/api/user/profile",{bio:(t=e).bio,profileImgUrl:t.profilePic}).then((function(e){return c((function(t){return Object(s.a)(Object(s.a)({},t),{},{user:Object(s.a)(Object(s.a)({},t.user),{},{bio:e.bio,profileImgUrl:e.profileImgUrl})})}))})).catch((function(e){return console.log(e)}))}}):Object(O.jsx)(m.a,{component:"button",style:{margin:"auto 0"},variant:"contained",onClick:function(){L("follow"===a.follow?"post":"delete","/api/user/follow/".concat(l)).then((function(e){"follow"===a.follow?c({user:e,follow:"following"}):c({user:e,follow:"follow"})})).catch((function(e){return console.log(e)}))},children:a.follow})]})}),v]}),Object(O.jsx)(R,{value:a.navbar})]}):Object(O.jsx)("div",{className:"loading",children:Object(O.jsx)(z.a,{})})}))),pe=n(18),fe=["token"],me=function(e){!function(e){F.a.defaults.headers.common.Authorization=e||void 0}(e)},Oe=function(e,t){return function(n){return new Promise((function(r,i){L("post","/api/auth/".concat(e),t).then((function(e){var t=e.token,i=Object(M.a)(e,fe);localStorage.setItem("jwtToken",t),me(localStorage.jwtToken),n({type:l,payload:{user:i}}),r(i)})).catch((function(e){return i(e)}))}))}},ve=n(199),xe=n(211),ge=n(198),we=n(200);function ye(e){var t=e.handleChange,n=e.input;return Object(O.jsxs)(ve.a,{fullWidth:!0,children:[Object(O.jsx)(xe.a,{htmlFor:"my-input",children:"User Name:"}),Object(O.jsx)(ge.a,{required:!0,type:"text",id:"my-input","aria-describedby":"my-helper-text",name:"username",value:n,onChange:function(e){return t(e)}}),Object(O.jsx)(we.a,{id:"my-helper-text",children:"Enter the user name."})]})}function ke(e){var t=e.handleChange,n=e.input;return Object(O.jsxs)(ve.a,{fullWidth:!0,children:[Object(O.jsx)(xe.a,{htmlFor:"my-input",children:"Email address"}),Object(O.jsx)(ge.a,{required:!0,type:"text",id:"my-input","aria-describedby":"my-helper-text",name:"email",value:n,onChange:function(e){return t(e)}}),Object(O.jsx)(we.a,{id:"my-helper-text",children:"We'll never share your email."})]})}function Ce(e){var t=e.handleChange;return Object(O.jsxs)(ve.a,{fullWidth:!0,children:[Object(O.jsx)(xe.a,{htmlFor:"my-input",children:"Password"}),Object(O.jsx)(ge.a,{required:!0,type:"password",id:"my-input","aria-describedby":"my-helper-text",name:"password",onChange:function(e){return t(e)}}),Object(O.jsx)(we.a,{id:"my-helper-text",children:"Your passwords are always safe."})]})}function Se(e){var t=e.handleChange,n=e.input;return Object(O.jsxs)(ve.a,{fullWidth:!0,children:[Object(O.jsx)(xe.a,{htmlFor:"my-input",children:"Profile picture link:"}),Object(O.jsx)(ge.a,{id:"my-input","aria-describedby":"my-helper-text",value:n,name:"profileImgUrl",onChange:function(e){return t(e)}}),Object(O.jsx)(we.a,{id:"my-helper-text",children:"Enter the URL of the profile picture."})]})}var Ne=n(205),Ue=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={error:!1,errorDisc:"",auth:"",username:"",email:"",password:"",profileImgUrl:""},r}return Object(w.a)(n,[{key:"handleChange",value:function(e){var t;this.setState((t={},Object(pe.a)(t,e.target.name,e.target.value),Object(pe.a)(t,"auth",this.props.auth),t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state,r=n.auth,i=n.username,o=n.email,a=n.password,c=n.profileImgUrl;"signup"===r?this.props.setCurrentUser(r,{username:i,email:o,password:a,profileImgUrl:c}).then((function(){t.props.history.push("/home")})).catch((function(e){return t.setState({error:!0,errorDisc:null===e||void 0===e?void 0:e.message})})):this.props.setCurrentUser(r,{email:o,password:a}).then((function(e){t.props.history.push("/home")})).catch((function(e){return t.setState({error:!0,errorDisc:null===e||void 0===e?void 0:e.message})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,r=t.email,o=t.profileImgUrl,a="signup"===this.props.auth?Object(O.jsxs)("div",{className:"form",children:[Object(O.jsx)("h2",{className:"auth-text",children:"Join TweetBook today!"}),Object(O.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(O.jsx)(ye,{input:n,handleChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("br",{}),Object(O.jsx)(ke,{input:r,handleChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("br",{}),Object(O.jsx)(Se,{input:o,handleChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("br",{}),Object(O.jsx)(Ce,{handleChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("br",{}),Object(O.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",children:"Signup"}),Object(O.jsx)("br",{}),this.state.error?Object(O.jsx)(Ne.a,{severity:"error",children:this.state.errorDisc}):null]})]}):Object(O.jsxs)("div",{className:"form",children:[Object(O.jsx)("h2",{className:"auth-text",children:"Login to TweetBook Now!"}),Object(O.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(O.jsx)(ke,{input:r,handleChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("br",{}),Object(O.jsx)(Ce,{handleChange:function(t){return e.handleChange(t)}}),Object(O.jsx)("br",{}),Object(O.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",children:"Login"}),Object(O.jsx)("br",{}),this.state.error?Object(O.jsx)(Ne.a,{severity:"error",children:this.state.errorDisc}):null]})]});return Object(O.jsx)(i.a.Fragment,{children:a})}}]),n}(r.Component);var Ie=Object(f.withRouter)(Object(b.b)((function(e){return{currentUser:e.currentUser}}),{setCurrentUser:Oe})(Ue)),Te=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).state={text:"",error:!1,errorDisc:""},r}return Object(w.a)(n,[{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"handlePost",value:function(e){var t,n=this;e.preventDefault(),(this.props.currentUserId,t={text:this.state.text},new Promise((function(e,n){L("post","/api/user/tweet",t).then((function(t){return e(t)})).catch((function(e){return n(e.message)}))}))).then((function(e){console.log(e),n.props.history.push("/home")})).catch((function(e){console.log(e),n.setState({error:!0,errorDisc:e.message})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"new-tweet",children:[Object(O.jsxs)(ve.a,{className:"message-card",style:{backgroundColor:"whitesmoke"},component:"form",onSubmit:function(t){return e.handlePost(t)},children:[Object(O.jsx)(se.a,{id:"outlined-multiline-static",style:{backgroundColor:"white"},label:"New Tweet",multiline:!0,rows:4,required:!0,variant:"outlined",value:this.state.text,onChange:function(t){return e.handleChange(t)}}),Object(O.jsx)(m.a,{style:{marginTop:"10px"},type:"submit",variant:"contained",color:"primary",children:"Post"})]}),Object(O.jsx)("br",{}),this.state.error?Object(O.jsx)(Ne.a,{severity:"error",children:this.state.errorDisc}):null]})}}]),n}(r.Component),_e=Object(f.withRouter)(Object(b.b)((function(e){return{currentUserId:e.currentUser.user._id}}),null)(Te)),Re=n(202),We=n(203),$e=n(55),Pe=function(){var e=Object(r.useState)(""),t=Object(W.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)([]),a=Object(W.a)(o,2),c=a[0],s=a[1],l=Object($e.useHistory)();return Object(O.jsxs)("div",{className:"search-screen",children:[Object(O.jsx)("div",{className:"notify-card",children:Object(O.jsx)(se.a,{id:"outlined-basic",label:"Search",style:{backgroundColor:"white"},variant:"outlined",placeholder:"Search User",value:n,onChange:function(e){var t;i(e.target.value),null!==(t=e.target.value)&&void 0!==t&&t.length?L("get","/api/users?search=".concat(e.target.value),null).then((function(e){return s(e)})).catch((function(e){return console.log(e)})):s([])},fullWidth:!0})}),Object(O.jsx)("div",{children:c.map((function(e){return Object(O.jsx)(Re.a,{className:"message-card cursor-pointer",onClick:function(){return l.push("/user/".concat(e._id.$oid))},children:Object(O.jsxs)(We.a,{className:"search-suggestion",children:[Object(O.jsx)("img",{className:"search-suggestion-img",src:(null===e||void 0===e?void 0:e.profileImgUrl)||"https://www.knack.com/images/about/default-profile.png",alt:"profile-img"}),Object(O.jsx)(V.a,{style:{marginLeft:"5px"},variant:"h6",gutterBottom:!0,children:e.username})]})},e._id.$oid)}))}),Object(O.jsx)(R,{value:"Search"})]})};var De,Ee=function(){var e=Object($e.useHistory)(),t=Object($e.useLocation)();return Object(r.useEffect)((function(){var n;null!==(n=localStorage)&&void 0!==n&&n.jwtToken||t.pathname.includes("/signin")&&t.pathname.includes("/signup")||e.push("/")}),[]),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(f.Route,{exact:!0,path:"/",children:Object(O.jsx)(v,{})}),Object(O.jsx)(f.Route,{path:"/signup",children:Object(O.jsx)(Ie,{auth:"signup"})}),Object(O.jsx)(f.Route,{path:"/signin",children:Object(O.jsx)(Ie,{auth:"signin"})}),Object(O.jsx)(f.Route,{path:"/home",children:Object(O.jsx)(ce,{})}),Object(O.jsx)(f.Route,{path:"/search",children:Object(O.jsx)(Pe,{})}),Object(O.jsx)(f.Route,{path:"/user/:id",children:Object(O.jsx)(be,{})}),Object(O.jsx)(f.Route,{path:"/newTweet",children:Object(O.jsx)(_e,{})})]})},Fe=n(97),Le=Object(c.d)(j,Object(c.c)(Object(c.a)(h.a)));if(null!==(De=localStorage)&&void 0!==De&&De.jwtToken){me(localStorage.jwtToken);try{var Ae=Object(Fe.a)(localStorage.jwtToken);Le.dispatch({type:l,payload:{user:{_id:{$oid:Ae.sub}}}})}catch(qe){Le.dispatch(Oe({}))}}var Be=function(){return Object(O.jsx)(b.a,{store:Le,children:Object(O.jsx)(p.a,{children:Object(O.jsx)(Ee,{})})})},ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function He(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(Be,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ze?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):He(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):He(t,e)}))}}()},28:function(e,t,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.5ab9a872.chunk.js.map